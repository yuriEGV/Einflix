"use strict";exports.id=258,exports.ids=[258],exports.modules={38258:(o,n,e)=>{e.r(n),e.d(n,{default:()=>r});var c=e(11185);let l=process.env.MONGO_URI||process.env.MONGODB_URI;if(!l)throw Error("Please define the MONGO_URI or MONGODB_URI environment variable inside .env.local");let s=global.mongoose;async function dbConnect(){if(console.log("[MongoDB] dbConnect called"),s.conn)return console.log("[MongoDB] Using cached connection"),s.conn;s.promise||(console.log("[MongoDB] Linking new connection..."),console.log("[MongoDB] URI:",l?l.substring(0,10)+"...":"UNDEFINED"),s.promise=c.connect(l,{bufferCommands:!1}).then(o=>(console.log("[MongoDB] Connection promise resolved"),o)).catch(o=>{throw console.error("[MongoDB] Connection promise REJECTED:",o),o}));try{console.log("[MongoDB] Awaiting connection..."),s.conn=await s.promise,console.log("[MongoDB] Connection established")}catch(o){throw console.error("[MongoDB] Connection FAILED in await:",o),s.promise=null,o}return s.conn}s||(s=global.mongoose={conn:null,promise:null});let r=dbConnect}};