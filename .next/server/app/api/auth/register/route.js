"use strict";(()=>{var e={};e.id=2,e.ids=[2],e.modules={11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},20350:(e,r,o)=>{o.r(r),o.d(r,{headerHooks:()=>d,originalPathname:()=>m,requestAsyncStorage:()=>l,routeModule:()=>u,serverHooks:()=>c,staticGenerationAsyncStorage:()=>p,staticGenerationBailout:()=>g});var s={};o.r(s),o.d(s,{POST:()=>POST}),o(78976);var t=o(10884),a=o(16132),i=o(38258),n=o(71409);function jsonResponse(e,r=200){return new Response(JSON.stringify(e),{status:r,headers:{"Content-Type":"application/json"}})}async function POST(e){console.log("=== REGISTER REQUEST ===");try{let r;await (0,i.Z)();try{r=await e.json()}catch(e){throw console.error("Error parsing body:",e),Error("Invalid XML/JSON body")}let{name:s,email:t,password:a}=r;console.log("Registering:",t);let u=await n.Z.findOne({email:t.toLowerCase()});if(u)return jsonResponse({success:!1,message:"El correo ya est\xe1 registrado"},400);console.log("Importing bcrypt...");let l=await Promise.resolve().then(o.bind(o,45764)),p=l.default||l;console.log("Hashing password...");let c=await p.genSalt(10),d=await p.hash(a,c),g=await n.Z.create({name:s,email:t,password:d});return console.log("User created:",g._id),jsonResponse({success:!0,message:"Usuario registrado con \xe9xito",user:{id:g._id,name:g.name,email:g.email}})}catch(e){return console.error("Register Error:",e),jsonResponse({success:!1,message:"Error al registrar usuario: "+e.message},500)}}let u=new t.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/auth/register/route",pathname:"/api/auth/register",filename:"route",bundlePath:"app/api/auth/register/route"},resolvedPagePath:"C:\\einflix\\app\\api\\auth\\register\\route.js",nextConfigOutput:"",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:p,serverHooks:c,headerHooks:d,staticGenerationBailout:g}=u,m="/api/auth/register/route"}};var r=require("../../../../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),o=r.X(0,[364,764,792],()=>__webpack_exec__(20350));module.exports=o})();